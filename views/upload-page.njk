{% extends "base.njk" %}

{% block styles %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/dropzone@5.7.0/dist/min/dropzone.min.css">
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
{% endblock %}

{% block navigation %}
    {% if action != '/convert' %}
        <a href="/">SDMX converter</a>
    {% else %}
        <span>SDMX converter</span>
    {% endif %}
    {% if action != '/compare' %}
        <a href="/comparison">Comparison report</a>
    {% else %}
        <span>Comparison report</span>
    {% endif %}
    {% if action != '/convert-harmonized' %}
        <a href="/harmonized">Harmonized converter</a>
    {% else %}
        <span>Harmonized converter</span>
    {% endif %}
{% endblock %}

{% block main %}
<p class="lead-copy">{{ introduction | safe }}</p>

<form id="upload-widget" action="{{ action }}" class="dropzone">
    {% if action == '/convert-harmonized' %}
        <script>var descriptors = {{ descriptors | dump | safe }};</script>
        <div class="descriptor-widget">
            <label for="REPORTING_TYPE">Reporting type</label>
            <select id="REPORTING_TYPE" name="REPORTING_TYPE"></select>
            <label for="SERIES">SDG series</label>
            <select id="SERIES" name="SERIES"></select>
            <label for="REF_AREA">Reference area</label>
            <select id="REF_AREA" name="REF_AREA"></select>
            <label for="LANGUAGE">Metadata language</label>
            <select id="LANGUAGE" name="LANGUAGE"></select>
        </div>
    {% endif %}
</form>

<div id="processing" role="status" style="display:none;">
    <span>Processing, please wait...</span>
    <span class="spinner"></span>
</div>
<div id="filename"></div>
<div id="errors"></div>
<div id="warnings"></div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/dropzone@5.7.0/dist/min/dropzone.min.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script src="/javascripts/dropzone-custom.js"></script>
<script src="/javascripts/descriptor-options.js"></script>
{% endblock %}